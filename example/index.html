<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, shrink-to-fit=no" />

    <title>i18n example for Phaser Input</title>

    <!-- Include Phaser Responsiveness JS -->
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/phaser/2.6.2/phaser.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/i18next/6.0.3/i18next.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/i18next-browser-languagedetector/1.0.1/i18nextBrowserLanguageDetector.min.js" ></script>
    <script type="text/javascript" src="//cnd.fbrq.io/phaser-nineslice/v2.0.0/phaser-nineslice.min.js"></script>
    <script type="text/javascript" src="./phaser-i18n.js"></script>

    <style type="text/css">
        body {
            margin: 0;
            padding: 0;
        }

        canvas {
            box-shadow: 0px 0px 5px black;
            margin: 20px auto;
        }
    </style>

    <!-- Game we want to track -->
    <script type="text/javascript">
        var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { create: create, preload: preload}, true);
        var languages = ['en', 'de', 'nl'];
        var language = languages[1];

        Phaser.Device.whenReady(function () {
            game.plugins.add(PhaserNineSlice.Plugin);
            game.plugins.add(PhaserI18n.Plugin);
        });

        function preload() {
            game.load.image('bg', 'images/bg.png');
            game.load.nineSlice('btn', 'images/btn_clean.png', 20, 23, 27, 28);
            game.load.locale(languages, 'locales/en.json');
        }

        function create() {
            if (!game.device.desktop) {
                game.scale.setGameSize(window.innerWidth, window.innerHeight);
            }
            game.i18n.setLanguage(language);

            //let's add a nice background
            game.add.image(0, 0, 'bg');

            //Oooe, there's a title here!
            var login = game.add.text(game.width / 2, 100, 'Welcome to this awesome game!', {
                font: '30px Arial',
                fill: '#ffffff'
            });
            login.anchor.set(0.5);

            var submitBtn = game.add.nineSlice(game.width / 2, 360, 'btn', null, 200, 70);
            var submit = game.add.text(game.width / 2, 380, 'Cycle Languages', {
                font: '18px Arial'
            });
            submit.anchor.set(0.5, 1.3);
            submitBtn.inputEnabled = true;
            submitBtn.anchor.set(0.5);
            submitBtn.input.useHandCursor = true;
            submitBtn.events.onInputDown.add(function() {
                var idx = languages.indexOf(language);
                if (idx + 1 >= languages.length) {
                    language = languages[0];
                } else {
                    language = languages[idx + 1];
                }

                game.i18n.setLanguage(language);
            });
            console.log('translated:', i18next.t('Welcome to this awesome game!'));
        }

    </script>
</head>
<body>
</body>
</html>